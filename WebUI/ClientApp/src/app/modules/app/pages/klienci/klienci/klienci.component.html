<p-card header="Lista klientÃ³w">
    <p-fieldset legend="Filtr" [toggleable]="true" styleClass="p-mb-4">
        <form [formGroup]="listaKlientowForm">
            <div class="p-fluid p-formgrid p-grid">
                <div class="p-field p-col-3">
                    <label for="fraza">Fraza</label>
                    <input formControlName="fraza" id="fraza" type="text" pInputText>
                </div>
                <div class="p-field p-col-2">
                    <label for="pesel">PESEL</label>
                    <input formControlName="pesel" id="pesel" type="text" pInputText>
                </div>
                <div class="p-field p-col-2">
                    <label for="nip">NIP</label>
                    <input formControlName="nip" id="nip" type="text" pInputText>
                </div>
                <div class="p-field p-col-2">
                    <label for="regon">REGON</label>
                    <input formControlName="regon" id="regon" type="text" pInputText>
                </div>
                <div class="p-field p-col-3 p-mt-auto">
                    <button pButton type="button" icon="pi pi-search" label="Wyszukaj" [disabled]="listaKlientowForm.invalid" (click)="wyszukajOnClick(tableRef)"></button>
                </div>
            </div>
        </form>
    </p-fieldset>
    <p-table #tableRef [value]="klienci" [lazy]="true" [paginator]="true" [rows]="10" [totalRecords]="liczbaRekordow" [loading]="loading" selectionMode="single"
        [(contextMenuSelection)]="wybranyKlient" [contextMenu]="contextMenuRef" [lazyLoadOnInit]="false" sortField="imie" styleClass="p-datatable-striped p-datatable-gridlines"
        (onLazyLoad)="pobierzKlientow($event)" (onContextMenuSelect)="naWybraniuKlienta(tableRef)">
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="imie">Imie<p-sortIcon field="imie"></p-sortIcon>
                </th>
                <th pSortableColumn="nazwisko">Nazwisko<p-sortIcon field="nazwisko"></p-sortIcon>
                </th>
                <th pSortableColumn="pesel">PESEL<p-sortIcon field="pesel"></p-sortIcon>
                </th>
                <th pSortableColumn="nazwa">Nazwa<p-sortIcon field="nazwa"></p-sortIcon>
                </th>
                <th pSortableColumn="regon">REGON<p-sortIcon field="regon"></p-sortIcon>
                </th>
                <th pSortableColumn="nip">NIP<p-sortIcon field="nip"></p-sortIcon>
                </th>
                <th pSortableColumn="adres">Adres<p-sortIcon field="adres"></p-sortIcon>
                </th>
                <th pSortableColumn="kraj.nazwaKraju">Kraj<p-sortIcon field="kraj.nazwaKraju"></p-sortIcon>
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-klient>
            <tr [pContextMenuRow]="klient">
                <td>{{klient.imie}}</td>
                <td>{{klient.nazwisko}}</td>
                <td>{{klient.pesel}}</td>
                <td>{{klient.nazwa}}</td>
                <td>{{klient.regon}}</td>
                <td>{{klient.nip}}</td>
                <td>{{klient.ulica}} {{klient.numerDomu}}{{klient.numerLokalu ? '/' + klient.numerLokalu : null}}, {{klient.kodPocztowy}} {{klient.miejscowosc}}</td>
                <td>{{klient.kraj.nazwaKraju}}</td>
            </tr>
        </ng-template>
    </p-table>
    <p-contextMenu #contextMenuRef appendTo="body" [model]="kontekstoweMenu"></p-contextMenu>
</p-card>